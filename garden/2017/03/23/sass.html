<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="keywords" content="前端开发,sass" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />
    <title>呆恋小喵的后花园 - </title>
    <link rel="shortcut icon" href="http://oij8a9ql4.bkt.clouddn.com/shortcut.ico" />
    <link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/8.0/styles/sunburst.min.css" />
    <link rel="stylesheet/less" href="/garden/assets/style/style.less" />
    <script src="https://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js"></script>
    <script src="https://cdn.bootcss.com/less.js/1.7.0/less.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/8.0/highlight.min.js"></script>
</head>
<body>
<script>
    var pageData = {};
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement('script');
        hm.src = 'https://hm.baidu.com/hm.js?6b9830e6ab8073ce1a44ad49a03d8596';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
<img src="http://oij8a9ql4.bkt.clouddn.com/portrait.jpg" alt="呆恋小喵" width="0" height="0" />
<nav>
    <a href="javascript:;" class="js_menu_btn">
        <span></span>
        <span></span>
        <span></span>
    </a>
    <ul class="js_menu">
        <li><a href="/garden/">Home</a></li>
        <li><a href="/garden/views/posts" class="js_goto_posts">Posts</a></li>
        <li><a href="/garden/views/about">About</a></li>
    </ul>
</nav>
<a href="javascript:;" class="gotop js_gotop"></a>
<header class="post" style="background-image: url('http://oij8a9ql4.bkt.clouddn.com/banner.jpg')">
    <div>
        <h2></h2>
        <time>23 Mar 2017</time>
        <p class="abstract"></p>
        <ul class="c-fix">
            
            <li>sass</li>
            
        </ul>
    </div>
</header>
<article class="js_article">
    <ul>
  <li>
    <p>结构化：</p>
  </li>
  <li>
    <p>模块化：</p>
  </li>
  <li>
    <p>组件化：</p>
  </li>
</ul>

<hr />

<h2 id="一变量">一、变量</h2>

<h4 id="变量默认值">变量默认值</h4>

<blockquote>
  <p>变量默认值的价值在于进行组件化开发。</p>
</blockquote>

<p>一个站点内的公用模块在不同页面的展现形式会有些许不同。例如：一个列表模块中列表项的分隔方式在不同页面存在差异。</p>

<p><img src="http://onppksal8.bkt.clouddn.com/module-list.jpg" alt="" /></p>

<p>传统做法：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="c">/* m-module-list.css 文件中 */</span>
<span class="nc">.module-list</span> <span class="p">{</span>
    <span class="err">li</span> <span class="err">{</span>
        <span class="nl">font-size</span><span class="p">:</span> <span class="m">14px</span><span class="p">;</span>
        <span class="nl">line-height</span><span class="p">:</span> <span class="m">22px</span><span class="p">;</span>
        <span class="nl">color</span><span class="p">:</span> <span class="m">#666</span><span class="p">;</span>
        <span class="nl">padding</span><span class="p">:</span> <span class="m">15px</span><span class="p">;</span>
        <span class="nl">background-color</span><span class="p">:</span> <span class="m">#FFF</span><span class="p">;</span>
        <span class="nl">border-bottom</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#F0F0F0</span><span class="p">;</span>
        <span class="nl">margin-bottom</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="c">/* style.css 文件中 */</span>
<span class="k">@import</span> <span class="s2">'m-module-list.css'</span><span class="p">;</span>

<span class="nc">.module-list</span> <span class="nt">li</span> <span class="p">{</span>
    <span class="nl">border-bottom</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>显而易见，传统做法会产生冗余代码。</p>

<p>使用变量默认值：</p>

<div class="language-sass highlighter-rouge"><pre class="highlight"><code><span class="cm">/* m-module-list.scss 文件中 */
</span><span class="nv">$borderBottomStyle</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="mh">#F0F0F0</span> <span class="o">!</span><span class="nb">default</span><span class="err">;</span>
<span class="nv">$marginBottomStyle</span><span class="p">:</span> <span class="nb">none</span> <span class="o">!</span><span class="nb">default</span><span class="err">;</span>

<span class="nc">.module-list</span> <span class="err">{</span>
    <span class="nt">li</span> <span class="err">{</span>
        <span class="nl">font-size</span><span class="p">:</span> <span class="m">14px</span><span class="err">;</span>
        <span class="nl">line-height</span><span class="p">:</span> <span class="m">22px</span><span class="err">;</span>
        <span class="nl">color</span><span class="p">:</span> <span class="mh">#666</span><span class="err">;</span>
        <span class="nl">padding</span><span class="p">:</span> <span class="m">15px</span><span class="err">;</span>
        <span class="nl">background-color</span><span class="p">:</span> <span class="mh">#FFF</span><span class="err">;</span>
        <span class="nl">border-bottom</span><span class="p">:</span> <span class="nv">$borderBottomStyle</span><span class="err">;</span>
        <span class="nl">margin-bottom</span><span class="p">:</span> <span class="nv">$marginBottomStyle</span><span class="err">;</span>
    <span class="err">}</span>
<span class="err">}</span>

<span class="cm">/* style.scss 文件中 */
</span><span class="nv">$borderBottomStyle</span><span class="p">:</span> <span class="nb">none</span><span class="err">;</span>
<span class="nv">$marginBottomStyle</span><span class="p">:</span> <span class="m">10px</span><span class="err">;</span>

<span class="k">@import</span> <span class="s">'m-module-list';</span>
</code></pre>
</div>

<p>解析后的 CSS 代码：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nc">.module-list</span> <span class="nt">li</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">14px</span><span class="p">;</span>
    <span class="nl">line-height</span><span class="p">:</span> <span class="m">22px</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#666</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">15px</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#FFF</span><span class="p">;</span>
    <span class="nl">border-bottom</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>上述方法是存在缺陷的：定义全局变量很容易造成污染。但自 v3.4 以后便不存在这样严重的问题了，为什么这样讲？</p>

<p>先看一段示例：</p>

<div class="language-sass highlighter-rouge"><pre class="highlight"><code><span class="nv">$color</span><span class="p">:</span> <span class="no">red</span><span class="err">;</span>
<span class="nt">p</span> <span class="err">{</span>
    <span class="nv">$color</span><span class="p">:</span> <span class="no">yellow</span><span class="err">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="nv">$color</span><span class="err">;</span>
<span class="err">}</span>
<span class="nt">a</span> <span class="err">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="nv">$color</span><span class="err">;</span>
<span class="err">}</span>
</code></pre>
</div>

<p>Sass v3.3 解析后的 CSS 代码：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">p</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">yellow</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">yellow</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Sass v3.4 解析后的 CSS 代码：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">p</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">yellow</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>自 Sass v3.4 变量的解析遵循：底层作用域内声明的变量相当于局部变量，不影响全局变量。</p>

<p>使用 Javascript 解释：</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> 
<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> 
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> 
<span class="p">})();</span> 
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="c1">// -&gt; 1</span>
</code></pre>
</div>

<p>而 Sass v3.3 及以前的设计思路为：在底层作用域声明变量相当于修改全局变量，它处调用该变量时会使用覆盖的新值。</p>

<p>使用 Javascript 解释：</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> 
<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> 
    <span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> 
<span class="p">})();</span> 
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="c1">// -&gt; 5</span>
</code></pre>
</div>

<h4 id="特殊变量">特殊变量</h4>

<ul>
  <li>
    <p>应用于选择器</p>
  </li>
  <li>
    <p>应用于属性值</p>
  </li>
</ul>

<h4 id="多值变量">多值变量</h4>

<ul>
  <li>List 类型</li>
</ul>

<div class="language-sass highlighter-rouge"><pre class="highlight"><code><span class="nv">$thumbType</span><span class="p">:</span> <span class="nb">default</span><span class="o">,</span> <span class="n">activity</span><span class="o">,</span> <span class="n">special</span><span class="err">;</span>
<span class="k">@each</span> <span class="nv">$type</span> <span class="n">in</span> <span class="nv">$thumbType</span> <span class="err">{</span>
    <span class="nv">%</span><span class="si">#{</span><span class="nv">$type</span><span class="si">}</span><span class="nv">-thumb</span> <span class="err">{</span>
        <span class="nl">background</span><span class="p">:</span> <span class="sx">url("../img/</span><span class="si">#{</span><span class="nv">$type</span><span class="si">}</span><span class="sx">-nothumb.jpg")</span> <span class="nb">no-repeat</span> <span class="m">0</span> <span class="m">0</span><span class="err">;</span>
        <span class="nl">background-size</span><span class="p">:</span> <span class="m">100%</span> <span class="nb">auto</span><span class="err">;</span>
        <span class="nl">padding-bottom</span><span class="p">:</span> <span class="m">100%</span><span class="err">;</span>
        <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="err">;</span>
        <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="err">;</span>
    <span class="err">}</span>
<span class="err">}</span>

<span class="nc">.section1</span> <span class="nc">.thumb</span> <span class="err">{</span>
    <span class="k">@extend</span> <span class="nv">%default-thumb</span><span class="o">;</span>
<span class="err">}</span>
<span class="nc">.section2</span> <span class="nc">.thumb</span> <span class="err">{</span>
    <span class="k">@extend</span> <span class="nv">%activity-thumb</span><span class="o">;</span>
<span class="err">}</span>
<span class="nc">.section3</span> <span class="nc">.thumb</span> <span class="err">{</span>
    <span class="k">@extend</span> <span class="nv">%special-thumb</span><span class="o">;</span>
<span class="err">}</span>
</code></pre>
</div>

<p>解析后的 CSS 代码：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nc">.section1</span> <span class="nc">.thumb</span> <span class="p">{</span>
    <span class="nl">background</span><span class="p">:</span> <span class="sx">url("../img/default-nothumb.jpg")</span> <span class="nb">no-repeat</span> <span class="m">0</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">background-size</span><span class="p">:</span> <span class="m">100%</span> <span class="nb">auto</span><span class="p">;</span>
    <span class="nl">padding-bottom</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.section2</span> <span class="nc">.thumb</span> <span class="p">{</span>
    <span class="nl">background</span><span class="p">:</span> <span class="sx">url("../img/activity-nothumb.jpg")</span> <span class="nb">no-repeat</span> <span class="m">0</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">background-size</span><span class="p">:</span> <span class="m">100%</span> <span class="nb">auto</span><span class="p">;</span>
    <span class="nl">padding-bottom</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.section3</span> <span class="nc">.thumb</span> <span class="p">{</span>
    <span class="nl">background</span><span class="p">:</span> <span class="sx">url("../img/special-nothumb.jpg")</span> <span class="nb">no-repeat</span> <span class="m">0</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">background-size</span><span class="p">:</span> <span class="m">100%</span> <span class="nb">auto</span><span class="p">;</span>
    <span class="nl">padding-bottom</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<ul>
  <li>Map 类型</li>
</ul>

<hr />

<h2 id="二嵌套">二、嵌套</h2>

<p>嵌套可增强文件的结构性及可读性，但嵌套层级过多却是大忌，@at-root 可解决该问题。</p>

<h4 id="at-root">@at-root</h4>

<blockquote>
  <p>@at-root 可防止选择器的优先级过高。</p>
</blockquote>

<p>先看一段很糟糕的代码，嵌套层级过多。层级关系的展现虽清晰，却莫名加高了选择器的优先级。那么在重置样式的时候便需要加更高的优先级，由此恶性循环。</p>

<div class="language-sass highlighter-rouge"><pre class="highlight"><code><span class="nc">.parent</span> <span class="err">{</span>
    <span class="nc">.child1</span> <span class="err">{</span>
        <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="err">;</span>
        <span class="nc">.child1-1</span> <span class="err">{</span>
            <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="err">;</span> 
            <span class="nc">.child1-1-1</span> <span class="err">{</span>
                <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="err">;</span>
            <span class="err">}</span>
        <span class="err">}</span>
    <span class="err">}</span>
<span class="err">}</span>
</code></pre>
</div>

<p>解析后的 CSS 代码：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nc">.parent</span> <span class="nc">.child1</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.parent</span> <span class="nc">.child1</span> <span class="nc">.child1-1</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.parent</span> <span class="nc">.child1</span> <span class="nc">.child1-1</span> <span class="nc">.child1-1-1</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>显然，.parent .child1 .child1-1 .child1-1-1 的优先级很高却完全没必要，我们需要做的便是降级。</p>

<div class="language-sass highlighter-rouge"><pre class="highlight"><code><span class="nc">.parent</span> <span class="err">{</span>
    <span class="nc">.child1</span> <span class="err">{</span>
        <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="err">;</span>
        <span class="k">@at-root</span> <span class="nc">.child1-1</span> <span class="err">{</span>
            <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="err">;</span>
            <span class="k">@at-root</span> <span class="nc">.child1-1-1</span> <span class="err">{</span>
                <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="err">;</span>
            <span class="err">}</span>
        <span class="err">}</span>
    <span class="err">}</span>
<span class="err">}</span>
</code></pre>
</div>

<p>解析后的 CSS 代码：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nc">.parent</span> <span class="nc">.child1</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.child1-1</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.child1-1-1</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>其实这并不是我想要的，我想要的是：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nc">.parent</span> <span class="nc">.child1</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.parent</span> <span class="nc">.child1-1</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.parent</span> <span class="nc">.child1-1-1</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>显然 @at-root 无法控制跳出的级数，无奈。</p>

<p>@at-root 的另一应用场景便是 @keyframes。动画的专属性较强，嵌套的写法能清晰的标明其被应用之处。在做功能删除时只需直接干掉一整段代码，无需查找对应的 @keyframes 顺便思考其影响范围，省时高效。</p>

<p>示例代码：</p>

<div class="language-sass highlighter-rouge"><pre class="highlight"><code><span class="cm">/* sass */
</span><span class="nc">.demo</span> <span class="err">{</span>
    <span class="nl">animation</span><span class="p">:</span> <span class="n">motion</span> <span class="m">1s</span> <span class="n">infinite</span><span class="err">;</span>
    <span class="k">@at-root</span> <span class="err">{</span>
        <span class="k">@keyframes</span> <span class="nt">motion</span> <span class="err">{</span>
            <span class="na">0</span><span class="err">% {</span><span class="nl">background-color</span><span class="p">:</span> <span class="no">red</span><span class="err">;}</span>
            <span class="na">100</span><span class="err">% {</span><span class="nl">background-color</span><span class="p">:</span> <span class="no">yellow</span><span class="err">;}</span>
        <span class="err">}</span>
    <span class="err">}</span>
<span class="err">}</span>
</code></pre>
</div>

<p>解析后的 CSS 代码：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="c">/* css */</span>
<span class="nc">.demo</span> <span class="p">{</span>
    <span class="nl">animation</span><span class="p">:</span> <span class="n">motion</span> <span class="m">1s</span> <span class="n">infinite</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@keyframes</span> <span class="n">motion</span> <span class="p">{</span>
    <span class="nt">0</span><span class="o">%</span> <span class="p">{</span><span class="nl">background-color</span><span class="p">:</span> <span class="no">red</span><span class="p">;}</span>
    <span class="nt">100</span><span class="o">%</span> <span class="p">{</span><span class="nl">background-color</span><span class="p">:</span> <span class="no">yellow</span><span class="p">;}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>其实上述是 v3.3 之前的做法，自 v3.4 这样书写即可：</p>

<div class="language-sass highlighter-rouge"><pre class="highlight"><code><span class="nc">.demo</span> <span class="err">{</span>
    <span class="nl">animation</span><span class="p">:</span> <span class="n">motion</span> <span class="m">1s</span> <span class="n">infinite</span><span class="err">;</span>
    <span class="k">@keyframes</span> <span class="nt">motion</span> <span class="err">{</span>
        <span class="na">0</span><span class="err">% {</span><span class="nl">background-color</span><span class="p">:</span> <span class="no">red</span><span class="err">;}</span>
        <span class="na">100</span><span class="err">% {</span><span class="nl">background-color</span><span class="p">:</span> <span class="no">yellow</span><span class="err">;}</span>
    <span class="err">}</span>
<span class="err">}</span>
</code></pre>
</div>

<p>@keyframes 会自动跳出父级的限制。</p>

<hr />

<h2 id="三继承">三、继承</h2>

<h4 id="mixin--include">@mixin + @include</h4>

<blockquote>
  <p>可传递参数，可设置参数默认值。</p>
</blockquote>

<h4 id="--extend">% + @extend</h4>

<blockquote>
  <p>用于定义通用样式最为合适。</p>
</blockquote>

<div class="language-sass highlighter-rouge"><pre class="highlight"><code><span class="nv">%horizontal-scroll</span> <span class="err">{</span>
    <span class="nl">white-space</span><span class="p">:</span> <span class="nb">nowrap</span><span class="err">;</span>
    <span class="nl">overflow-x</span><span class="p">:</span> <span class="nb">scroll</span><span class="err">;</span>
    <span class="nt">li</span> <span class="err">{</span>
        <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="err">;</span>
        <span class="nl">vertical-align</span><span class="p">:</span> <span class="nb">middle</span><span class="err">;</span>
    <span class="err">}</span>
    <span class="err">&amp;</span><span class="p">:</span><span class="o">:-</span><span class="n">webkit-scrollbar</span> <span class="err">{</span>
        <span class="nl">width</span><span class="p">:</span> <span class="m">0</span><span class="err">;</span>
        <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="err">;</span>
        <span class="nl">opacity</span><span class="p">:</span> <span class="m">0</span><span class="err">;</span>
    <span class="err">}</span>
<span class="err">}</span>

<span class="nt">section</span><span class="nc">.horizontal-scroll</span> <span class="err">{</span>
    <span class="k">@extend</span> <span class="nv">%horizontal-scroll</span><span class="o">;</span>
<span class="err">}</span>
</code></pre>
</div>

<p>解析后的 CSS 代码：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">section</span><span class="nc">.horizontal-scroll</span> <span class="p">{</span>
    <span class="nl">white-space</span><span class="p">:</span> <span class="nb">nowrap</span><span class="p">;</span>
    <span class="nl">overflow-x</span><span class="p">:</span> <span class="nb">scroll</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">section</span><span class="nc">.horizontal-scroll</span> <span class="nt">li</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
    <span class="nl">vertical-align</span><span class="p">:</span> <span class="nb">middle</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">section</span><span class="nc">.horizontal-scroll</span><span class="nd">::-webkit-scrollbar</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">opacity</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<hr />

<h2 id="四函数">四、函数</h2>

<p>产生值，非属性。</p>

<hr />

<h2 id="五语句">五、语句</h2>

<h4 id="三目判断">三目判断</h4>

<p>莫名觉得会很常用。</p>

<h4 id="if">@if</h4>

<div class="language-sass highlighter-rouge"><pre class="highlight"><code><span class="k">@for</span> <span class="nv">$lineCount</span> <span class="ow">from</span> <span class="m">1</span> <span class="ow">through</span> <span class="m">3</span> <span class="err">{</span>
    <span class="nv">%ellipsis-row</span><span class="si">#{</span><span class="nv">$lineCount</span><span class="si">}</span> <span class="err">{</span>
        <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="err">;</span>
        <span class="k">@if</span> <span class="nv">$lineCount</span> <span class="o">==</span> <span class="m">1</span> <span class="err">{</span>
            <span class="nl">white-space</span><span class="p">:</span> <span class="nb">nowrap</span><span class="err">;</span>
            <span class="nl">text-overflow</span><span class="p">:</span> <span class="n">ellipsis</span><span class="err">;</span>
        <span class="err">}</span> <span class="o">@</span><span class="nt">else</span> <span class="err">{</span>
            <span class="nl">display</span><span class="p">:</span> <span class="o">-</span><span class="n">webkit-box</span><span class="err">;</span>
            <span class="nl">text-overflow</span><span class="p">:</span> <span class="o">-</span><span class="n">o-ellipsis-lastline</span><span class="err">;</span>
            <span class="na">-webkit-box-orient</span><span class="p">:</span> <span class="n">vertical</span><span class="err">;</span>
            <span class="na">-webkit-line-clamp</span><span class="p">:</span> <span class="nv">$lineCount</span><span class="err">;</span>
        <span class="err">}</span>
    <span class="err">}</span>
<span class="err">}</span>

<span class="nc">.section1</span> <span class="nt">p</span> <span class="err">{</span>
    <span class="k">@extend</span> <span class="nv">%ellipsis-row1</span><span class="o">;</span>
<span class="err">}</span>
<span class="nc">.section2</span> <span class="nt">p</span> <span class="err">{</span>
    <span class="k">@extend</span> <span class="nv">%ellipsis-row2</span><span class="o">;</span>
<span class="err">}</span>
<span class="nc">.section3</span> <span class="nt">p</span> <span class="err">{</span>
    <span class="k">@extend</span> <span class="nv">%ellipsis-row3</span><span class="o">;</span>
<span class="err">}</span>
</code></pre>
</div>

<p>解析后的 CSS 代码：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nc">.section1</span> <span class="nt">p</span> <span class="p">{</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
    <span class="nl">white-space</span><span class="p">:</span> <span class="nb">nowrap</span><span class="p">;</span>
    <span class="nl">text-overflow</span><span class="p">:</span> <span class="n">ellipsis</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.section2</span> <span class="nt">p</span> <span class="p">{</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">-webkit-box</span><span class="p">;</span>
    <span class="nl">text-overflow</span><span class="p">:</span> <span class="n">-o-ellipsis-lastline</span><span class="p">;</span>
    <span class="nl">-webkit-box-orient</span><span class="p">:</span> <span class="n">vertical</span><span class="p">;</span>
    <span class="nl">-webkit-line-clamp</span><span class="p">:</span> <span class="m">2</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.section3</span> <span class="nt">p</span> <span class="p">{</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">-webkit-box</span><span class="p">;</span>
    <span class="nl">text-overflow</span><span class="p">:</span> <span class="n">-o-ellipsis-lastline</span><span class="p">;</span>
    <span class="nl">-webkit-box-orient</span><span class="p">:</span> <span class="n">vertical</span><span class="p">;</span>
    <span class="nl">-webkit-line-clamp</span><span class="p">:</span> <span class="m">3</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="for">@for</h4>

<p>for 循环的书写形式有两种：</p>

<ul>
  <li>
    <p>@for <strong>$var</strong> from <strong>start</strong> through <strong>end</strong></p>
  </li>
  <li>
    <p>@for <strong>$var</strong> from <strong>start</strong> to <strong>end</strong></p>
  </li>
</ul>

<p>第一种在循环遍历时会对第 <strong>end</strong> 项进行操作，第二种则不会。本人认为习惯使用一种即可，不然易混淆。</p>

<h5 id="应用场景">应用场景</h5>

<p>我司喜好做 “固定模板” 需求：运营同学会将一张图片裁切成 n 个区域，点击每一区域的行为有所不同。比如一张美女的面部图，点击其眼睛时会推荐一些双眼皮项目，点击其鼻子时会推荐一些鼻综合项目等等（我司是做微整形交易平台的）。</p>

<p>区域划分是有一定规则的，如下图：当前行仅含一张图片时图片宽度为 100%，两张时为 50%，… n 张时为 (100 / n)%。</p>

<p><img src="http://onppksal8.bkt.clouddn.com/static-template.jpg" alt="固定模板" /></p>

<p>相关代码：</p>

<div class="language-sass highlighter-rouge"><pre class="highlight"><code><span class="nv">%clear-float</span> <span class="err">{</span>
    <span class="k">&amp;</span><span class="nd">:after</span> <span class="err">{</span>
        <span class="nl">content</span><span class="p">:</span> <span class="s2">""</span><span class="err">;</span>
        <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="err">;</span>
        <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="err">;</span>
        <span class="nl">clear</span><span class="p">:</span> <span class="nb">both</span><span class="err">;</span>
        <span class="nl">visibility</span><span class="p">:</span> <span class="nb">hidden</span><span class="err">;</span>
    <span class="err">}</span>
<span class="err">}</span>
<span class="nv">%adapt-image</span> <span class="err">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="err">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="err">;</span>
<span class="err">}</span>
<span class="nv">%static-template</span> <span class="err">{</span>
    <span class="nt">div</span> <span class="err">{</span>
        <span class="k">@extend</span> <span class="nv">%clear-float</span><span class="o">;</span>
        <span class="nt">a</span> <span class="err">{</span>
            <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="err">;</span>           
            <span class="nt">img</span> <span class="err">{</span>
                <span class="k">@extend</span> <span class="nv">%adapt-image</span><span class="o">;</span>
            <span class="err">}</span>
        <span class="err">}</span>
    <span class="err">}</span>
    <span class="k">@for</span> <span class="nv">$itemCount</span> <span class="ow">from</span> <span class="m">1</span> <span class="ow">through</span> <span class="m">3</span> <span class="err">{</span>
        <span class="nc">.count</span><span class="si">#{</span><span class="nv">$itemCount</span><span class="si">}</span> <span class="err">{</span>
            <span class="nt">a</span> <span class="err">{</span>
                <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="o">/</span><span class="nv">$itemCount</span><span class="err">;</span>
            <span class="err">}</span>
        <span class="err">}</span>
    <span class="err">}</span>
<span class="err">}</span>
<span class="nt">section</span><span class="nc">.static-template</span> <span class="err">{</span>
    <span class="k">@extend</span> <span class="nv">%static-template</span><span class="o">;</span>
<span class="err">}</span>
</code></pre>
</div>

<p>解析后的 CSS 代码：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">section</span><span class="nc">.static-template</span> <span class="nt">div</span><span class="nd">:after</span> <span class="p">{</span>
    <span class="nl">content</span><span class="p">:</span> <span class="s1">""</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">clear</span><span class="p">:</span> <span class="nb">both</span><span class="p">;</span>
    <span class="nl">visibility</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">section</span><span class="nc">.static-template</span> <span class="nt">div</span> <span class="nt">a</span> <span class="nt">img</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">section</span><span class="nc">.static-template</span> <span class="nt">div</span> <span class="nt">a</span> <span class="p">{</span>
    <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">section</span><span class="nc">.static-template</span> <span class="nc">.count1</span> <span class="nt">a</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">section</span><span class="nc">.static-template</span> <span class="nc">.count2</span> <span class="nt">a</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">section</span><span class="nc">.static-template</span> <span class="nc">.count3</span> <span class="nt">a</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">33.33333333%</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="each">@each</h4>

<p>each 可循环遍历两种数据类型：</p>

<ul>
  <li>
    <p>@each <strong>$var</strong> in <strong>list</strong></p>
  </li>
  <li>
    <p>@each <strong>$var</strong> in <strong>map</strong></p>
  </li>
</ul>

<h5 id="应用场景-1">应用场景</h5>

<p>通常，一个站点含多套配色方案，以按钮的配色为例：主色、辅助色、弱色。每套配色又由多种状态色组成：常态色、点击色、失效色。</p>

<p><img src="http://onppksal8.bkt.clouddn.com/btn-group.jpg" alt="" /></p>

<p>我们可以将这些色值按照一定的规则储存在 map 中，这样做的优势为：</p>

<ul>
  <li>
    <p>结构及语义清晰，增强了可读性且易于修改。</p>
  </li>
  <li>
    <p>添加新的配色方案相当于添加配置项，无需撰写大量代码。</p>
  </li>
</ul>

<p>相关代码：</p>

<div class="language-sass highlighter-rouge"><pre class="highlight"><code><span class="nv">$btnColor</span><span class="p">:</span> <span class="p">(</span>
    <span class="na">main</span><span class="p">:</span> <span class="p">(</span>
        <span class="na">normal</span><span class="p">:</span> <span class="p">(</span>
            <span class="nl">font</span><span class="p">:</span> <span class="mh">#C53336</span><span class="o">,</span>
            <span class="nl">border</span><span class="p">:</span> <span class="mh">#C53336</span><span class="o">,</span>
            <span class="nl">background</span><span class="p">:</span> <span class="mh">#FFF</span>
        <span class="o">),</span>
        <span class="na">active</span><span class="p">:</span> <span class="p">(</span>
            <span class="nl">font</span><span class="p">:</span> <span class="mh">#FFF</span><span class="o">,</span>
            <span class="nl">border</span><span class="p">:</span> <span class="mh">#C53336</span><span class="o">,</span>
            <span class="nl">background</span><span class="p">:</span> <span class="mh">#C53336</span>
        <span class="o">),</span>
        <span class="na">disabled</span><span class="p">:</span> <span class="p">(</span>
            <span class="nl">font</span><span class="p">:</span> <span class="mh">#999</span><span class="o">,</span>
            <span class="nl">border</span><span class="p">:</span> <span class="mh">#F5F5F5</span><span class="o">,</span>
            <span class="nl">background</span><span class="p">:</span> <span class="mh">#F5F5F5</span>
        <span class="o">)</span>
    <span class="o">),</span>
    <span class="na">weak</span><span class="p">:</span> <span class="p">(</span>
        <span class="na">normal</span><span class="p">:</span> <span class="p">(</span>
            <span class="nl">font</span><span class="p">:</span> <span class="mh">#333</span><span class="o">,</span>
            <span class="nl">border</span><span class="p">:</span> <span class="mh">#666</span><span class="o">,</span>
            <span class="nl">background</span><span class="p">:</span> <span class="mh">#FFF</span>
        <span class="o">),</span>
        <span class="na">active</span><span class="p">:</span> <span class="p">(</span>
            <span class="nl">font</span><span class="p">:</span> <span class="mh">#FFF</span><span class="o">,</span>
            <span class="nl">border</span><span class="p">:</span> <span class="mh">#666</span><span class="o">,</span>
            <span class="nl">background</span><span class="p">:</span> <span class="mh">#666</span>
        <span class="o">),</span>
        <span class="na">disabled</span><span class="p">:</span> <span class="p">(</span>
            <span class="nl">font</span><span class="p">:</span> <span class="mh">#999</span><span class="o">,</span>
            <span class="nl">border</span><span class="p">:</span> <span class="mh">#CCC</span><span class="o">,</span>
            <span class="nl">background</span><span class="p">:</span> <span class="mh">#FFF</span>
        <span class="o">)</span>
    <span class="o">)</span>
<span class="o">);</span>
<span class="k">@mixin</span> <span class="nf">btnColor</span> <span class="p">(</span><span class="nv">$font</span><span class="o">,</span> <span class="nv">$border</span><span class="o">,</span> <span class="nv">$background</span><span class="p">)</span> <span class="err">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="nv">$font</span><span class="err">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="nv">$border</span><span class="err">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="nv">$background</span><span class="err">;</span>
<span class="err">}</span>
<span class="k">@each</span> <span class="nv">$type</span><span class="o">,</span> <span class="nv">$status</span> <span class="n">in</span> <span class="nv">$btnColor</span> <span class="err">{</span>
    <span class="nv">%btn-</span><span class="si">#{</span><span class="nv">$type</span><span class="si">}</span> <span class="err">{</span>
        <span class="nv">$normal</span><span class="p">:</span> <span class="nf">map-get</span><span class="p">(</span><span class="nv">$status</span><span class="o">,</span> <span class="nb">normal</span><span class="p">)</span><span class="err">;</span>
        <span class="nv">$active</span><span class="p">:</span> <span class="nf">map-get</span><span class="p">(</span><span class="nv">$status</span><span class="o">,</span> <span class="n">active</span><span class="p">)</span><span class="err">;</span>
        <span class="nv">$disabled</span><span class="p">:</span> <span class="nf">map-get</span><span class="p">(</span><span class="nv">$status</span><span class="o">,</span> <span class="n">disabled</span><span class="p">)</span><span class="err">;</span>
        
        <span class="k">@include</span> <span class="nd">btnColor</span><span class="p">(</span><span class="nf">map-values</span><span class="p">(</span><span class="nv">$normal</span><span class="p">)</span><span class="o">...</span><span class="p">)</span><span class="err">;</span>
        
        <span class="k">&amp;</span><span class="nd">:active</span> <span class="err">{</span>
            <span class="k">@include</span> <span class="nd">btnColor</span><span class="p">(</span><span class="nf">map-values</span><span class="p">(</span><span class="nv">$active</span><span class="p">)</span><span class="o">...</span><span class="p">)</span><span class="err">;</span>
        <span class="err">}</span>
        <span class="k">&amp;</span><span class="nc">.disabled</span> <span class="err">{</span>
            <span class="k">@include</span> <span class="nd">btnColor</span><span class="p">(</span><span class="nf">map-values</span><span class="p">(</span><span class="nv">$disabled</span><span class="p">)</span><span class="o">...</span><span class="p">)</span><span class="err">;</span>
        <span class="err">}</span>
    <span class="err">}</span>
<span class="err">}</span>

<span class="nt">a</span><span class="nc">.btn-main</span> <span class="err">{</span>
    <span class="k">@extend</span> <span class="nv">%btn-main</span><span class="o">;</span>
<span class="err">}</span>
<span class="nt">a</span><span class="nc">.btn-weak</span> <span class="err">{</span>
    <span class="k">@extend</span> <span class="nv">%btn-weak</span><span class="o">;</span>
<span class="err">}</span>
</code></pre>
</div>

<p>解析后的 CSS 代码：</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">a</span><span class="nc">.btn-main</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#C53336</span><span class="p">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="m">#C53336</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#FFF</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nc">.btn-main</span><span class="nd">:active</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#FFF</span><span class="p">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="m">#C53336</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#C53336</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nc">.disabled.btn-main</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#999</span><span class="p">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="m">#F5F5F5</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#F5F5F5</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nc">.btn-weak</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#333</span><span class="p">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="m">#666</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#FFF</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nc">.btn-weak</span><span class="nd">:active</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#FFF</span><span class="p">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="m">#666</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#666</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nc">.disabled.btn-weak</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#999</span><span class="p">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="m">#CCC</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#FFF</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

</article>
<footer>
    <a href="/garden/views/posts" class="js_goto_posts">返回目录 - 我的印记</a>
</footer>
<div class="browser js_browser">
    <img src="" />
</div>

<script src="/garden/assets/script/main.js"></script>
</body>
</html>
